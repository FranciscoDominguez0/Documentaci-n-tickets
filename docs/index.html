<!doctype html>
<!--
  Plantilla de documentación estilo "Doc Site" en tema oscuro.
  Instrucciones de imágenes: coloca tus imágenes en `docs/assets/` con los nombres listados en `assets/README_images.md`.
  Nombres recomendados (ejemplos):
    - dashboard.png         -> se muestra en la sección Introducción
    - ticket-list.png       -> lista de tickets
    - ticket-detail.png     -> detalle de ticket
    - db-schema.png         -> diagrama ER / esquema
    - api-example-req.png   -> ejemplo de request
    - api-example-resp.png  -> ejemplo de response
-->
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Documentación — Sistema Tickets</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="doc-layout">
    <aside class="sidebar">
      <div class="brand">
        <img src="assets/logo-placeholder.png" alt="Logo" />
        <h3>Sistema Tickets</h3>
      </div>
      <input class="search" placeholder="Buscar..." aria-label="Buscar documentación" />
      <nav class="nav">
        <a href="#intro" class="active"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 4h16v16H4z"/><path d="M8 8h8M8 12h8M8 16h6"/></svg></span>Introducción</a>
        <a href="#objetivos"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2v4"/><path d="M4.9 4.9l2.8 2.8"/><path d="M2 12h4"/><path d="M4.9 19.1l2.8-2.8"/><path d="M12 18v4"/><path d="M19.1 19.1l-2.8-2.8"/><path d="M18 12h4"/><path d="M19.1 4.9l-2.8 2.8"/><path d="M12 7a5 5 0 1 0 0 10a5 5 0 0 0 0-10z"/></svg></span>Objetivos y Alcance</a>
        <a href="#roles"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 11a4 4 0 1 0-8 0"/><path d="M4 20a8 8 0 0 1 16 0"/><path d="M18 8a3 3 0 1 0 0-6"/></svg></span>Roles y permisos</a>
        <a href="#flujos"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 6h12v4H6z"/><path d="M6 14h12v4H6z"/><path d="M12 10v4"/></svg></span>Flujos del sistema</a>
        <a href="#instalacion"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2v10"/><path d="M8 8l4 4l4-4"/><path d="M4 14v6h16v-6"/></svg></span>Instalación</a>
        <a href="#autenticacion"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 11V8a5 5 0 0 1 10 0v3"/><path d="M6 11h12v10H6z"/></svg></span>Acceso y autenticación</a>
        <a href="#panel-clientes"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 12a4 4 0 1 0-4-4a4 4 0 0 0 4 4z"/><path d="M4 20a8 8 0 0 1 16 0"/></svg></span>Panel de Clientes</a>
        <a href="#panel-agentes"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 12a4 4 0 1 0-4-4a4 4 0 0 0 4 4z"/><path d="M4 20a8 8 0 0 1 16 0"/><path d="M18 7h4"/></svg></span>Panel de Agentes</a>
        <a href="#panel-admin"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2l3 6l7 1l-5 5l1 7l-6-3l-6 3l1-7l-5-5l7-1z"/></svg></span>Panel de Administración</a>
        <a href="#tareas-operativas"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 11l2 2l4-4"/><path d="M7 4h10a2 2 0 0 1 2 2v14H5V6a2 2 0 0 1 2-2z"/><path d="M9 4V2h6v2"/></svg></span>Tareas operativas</a>
        <a href="#api"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 9l-3 3l3 3"/><path d="M16 9l3 3l-3 3"/><path d="M14 6l-4 12"/></svg></span>API / Endpoints</a>
        <a href="#db"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3c-4.4 0-8 1.3-8 3v12c0 1.7 3.6 3 8 3s8-1.3 8-3V6c0-1.7-3.6-3-8-3z"/><path d="M4 6c0 1.7 3.6 3 8 3s8-1.3 8-3"/><path d="M4 12c0 1.7 3.6 3 8 3s8-1.3 8-3"/></svg></span>Base de datos</a>
        <a href="#seguridad"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2l8 4v6c0 6-3.3 9.5-8 10c-4.7-.5-8-4-8-10V6z"/><path d="M9 12l2 2l4-4"/></svg></span>Seguridad</a>
        <a href="#troubleshooting"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 0-4 13v3l4 4l4-4v-3a7 7 0 0 0-4-13z"/><path d="M10 9h4"/><path d="M12 9v5"/></svg></span>Troubleshooting</a>
        <a href="#faq"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/><path d="M9.5 9a2.5 2.5 0 1 1 3.8 2.1c-.8.5-1.3 1.1-1.3 2v.4"/><path d="M12 17h.01"/></svg></span>FAQ</a>
        <a href="#capturas"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 7h4l2-2h4l2 2h4v12H4z"/><path d="M12 17a4 4 0 1 0-4-4a4 4 0 0 0 4 4z"/></svg></span>Capturas</a>
        <a href="#contribuir"><span class="icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 20h9"/><path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L8 18l-4 1l1-4z"/></svg></span>Contribuir</a>
      </nav>
      <div class="version">v1.0 • 2026</div>
    </aside>

    <main class="content">
      <article class="page">
        <header class="page-header">
          <h1 id="intro">Introducción</h1>
          <p class="muted">Breve descripción del propósito del sistema y flujo principal.</p>
        </header>

        <section class="panel">
          <h2>Visión general</h2>
          <p>Este sistema centraliza la creación, asignación, atención y cierre de solicitudes mediante un flujo controlado de tickets. Está diseñado para operar con perfiles diferenciados (clientes, agentes y administradores), mantener trazabilidad y acelerar la resolución con métricas y estados.</p>
          <div class="badges">
            <span class="badge"><span class="dot"></span>Roles: Cliente / Agente / Admin</span>
            <span class="badge"><span class="dot"></span>Trazabilidad y auditoría</span>
            <span class="badge"><span class="dot"></span>Asignación y priorización</span>
            <span class="badge"><span class="dot"></span>Historial y comentarios</span>
          </div>
          <div class="callouts">
            <div class="callout">
              <h4>Qué resuelve</h4>
              <p>Ordena la demanda de soporte, reduce tiempos de respuesta y hace visible el estado real de cada solicitud.</p>
            </div>
            <div class="callout">
              <h4>Cómo opera</h4>
              <p>Los clientes registran tickets; los agentes los atienden; el administrador define reglas, usuarios y reportes.</p>
            </div>
            <div class="callout">
              <h4>Qué queda registrado</h4>
              <p>Estados, responsables, prioridad, tiempos, comentarios, adjuntos y eventos relevantes.</p>
            </div>
          </div>
          <div class="hero-preview">
            <img src="assets/Dashboard.png" alt="Dashboard" />
          </div>
        </section>

        <section id="objetivos" class="panel">
          <h2>Objetivos y Alcance</h2>
          <div class="two-col">
            <div class="card">
              <h4>Objetivos</h4>
              <p>Estandarizar el proceso de soporte, medir desempeño (tiempos y cargas) y asegurar una experiencia consistente para clientes y agentes.</p>
            </div>
            <div class="card">
              <h4>Alcance</h4>
              <p>Incluye: autenticación, creación y seguimiento de tickets, asignación, comentarios, adjuntos, gestión de usuarios/roles y reportes básicos.</p>
            </div>
          </div>
          <hr />
          <h3>Definiciones rápidas</h3>
          <table>
            <thead><tr><th>Término</th><th>Definición</th></tr></thead>
            <tbody>
              <tr><td>Ticket</td><td>Registro de una solicitud/incidencia con ciclo de vida, responsable y evidencia.</td></tr>
              <tr><td>Cliente</td><td>Usuario final que reporta y da seguimiento a sus tickets.</td></tr>
              <tr><td>Agente</td><td>Soporte que atiende, responde, clasifica y resuelve tickets.</td></tr>
              <tr><td>Administrador</td><td>Gestiona usuarios, parámetros del sistema, asignación avanzada y reportes.</td></tr>
            </tbody>
          </table>
        </section>

        <section id="roles" class="panel">
          <h2>Roles y permisos</h2>
          <p>Los permisos pueden variar por implementación. Esta matriz sirve como base para un control consistente.</p>
          <table>
            <thead><tr><th>Acción</th><th>Cliente</th><th>Agente</th><th>Administrador</th></tr></thead>
            <tbody>
              <tr><td>Crear ticket</td><td>Sí</td><td>Sí</td><td>Sí</td></tr>
              <tr><td>Ver tickets</td><td>Propios</td><td>Asignados y cola</td><td>Todos</td></tr>
              <tr><td>Cambiar estado</td><td>Limitado</td><td>Sí</td><td>Sí</td></tr>
              <tr><td>Asignar/Reasignar</td><td>No</td><td>Según permiso</td><td>Sí</td></tr>
              <tr><td>Administrar usuarios</td><td>No</td><td>No</td><td>Sí</td></tr>
            </tbody>
          </table>
        </section>

        <section id="flujos" class="panel">
          <h2>Flujos del sistema</h2>
          <div class="cards">
            <div class="card">
              <h4>Flujo: creación y asignación</h4>
              <p>Cliente crea ticket → entra a cola → se asigna (manual o por reglas) → agente inicia atención.</p>
            </div>
            <div class="card">
              <h4>Flujo: resolución y cierre</h4>
              <p>Agente responde → solicita info (si aplica) → marca resuelto → cliente confirma o se cierra por política.</p>
            </div>
            <div class="card">
              <h4>Flujo: escalamiento</h4>
              <p>Tickets críticos pueden escalarse por prioridad, SLA, categoría o falta de respuesta.</p>
            </div>
          </div>
          <h3>Estados recomendados</h3>
          <table>
            <thead><tr><th>Estado</th><th>Descripción</th><th>Responsable principal</th></tr></thead>
            <tbody>
              <tr><td>Nuevo</td><td>Ticket recién creado, pendiente de revisión/asignación.</td><td>Sistema / Admin</td></tr>
              <tr><td>Asignado</td><td>Hay un agente responsable definido.</td><td>Agente</td></tr>
              <tr><td>En progreso</td><td>Se está trabajando activamente.</td><td>Agente</td></tr>
              <tr><td>En espera</td><td>Falta información del cliente o validación externa.</td><td>Cliente / Agente</td></tr>
              <tr><td>Resuelto</td><td>Solución entregada; pendiente confirmación/cierre.</td><td>Cliente</td></tr>
              <tr><td>Cerrado</td><td>Finalizado; no admite cambios (o queda solo lectura).</td><td>Sistema</td></tr>
            </tbody>
          </table>
        </section>

        <section id="instalacion" class="panel">
          <h2>Instalación</h2>
          <p>Copiar la carpeta `docs` dentro del proyecto en XAMPP o servir la carpeta directamente.</p>
          <pre><code class="bash">xcopy /E /I "C:\Users\domin\Documenacion-tickets\docs" "C:\xampp81\htdocs\sistema-tickets\docs"
start http://localhost/sistema-tickets/docs/
</code></pre>
          <h3>Requisitos</h3>
          <ul>
            <li>PHP 8.1 o superior</li>
            <li>MySQL / MariaDB</li>
            <li>Composer (opcional)</li>
          </ul>
        </section>

        <section id="guia" class="panel">
          <h2>Guía rápida / Uso</h2>
          <ol>
            <li>Configura conexión a la base de datos en <code>config.php</code> o <code>.env</code>.</li>
            <li>Importa <code>db/schema.sql</code> o ejecuta migraciones.</li>
            <li>Visita la URL principal, crea un ticket y revisa su historial.</li>
          </ol>
          <div class="split">
            <div>
              <h4>Rutas importantes</h4>
              <ul>
                <li><code>/tickets</code> — Lista</li>
                <li><code>/tickets/create</code> — Crear</li>
                <li><code>/tickets/{id}</code> — Detalle</li>
                <li><code>/api/tickets</code> — API REST</li>
              </ul>
            </div>
            <div>
              <h4>Atajos</h4>
              <p>Puedes acceder al panel de administración en <code>/admin</code> (si aplica).</p>
            </div>
          </div>
        </section>

        <section id="modules" class="panel">
          <h2>Módulos y Roles</h2>
          <p>Descripción completa de los módulos principales del sistema: <strong>Usuario</strong>, <strong>Agente</strong> y <strong>Administrador</strong>. Cada subsección indica funciones, creación, asignación, permisos, endpoints y esquema de base de datos mínimo.</p>

          <article class="module">
            <h3>Módulo: Usuario</h3>
            <p><strong>Propósito:</strong> Clientes o usuarios finales que reportan incidencias o solicitudes.</p>
            <h4>Funciones principales</h4>
            <ul>
              <li>Registro / autenticación (registro por email o invitación).</li>
              <li>Crear ticket: título, descripción, prioridad, adjuntos.</li>
              <li>Ver y filtrar sus tickets (estado, prioridad, fecha).</li>
              <li>Comentar en tickets y adjuntar archivos.</li>
              <li>Cerrar/confirmar resolución (si está permitido).</li>
            </ul>
            <h4>Cómo se crea</h4>
            <p>Un `Usuario` se crea vía:</p>
            <ul>
              <li>Formulario de registro público (self-service).</li>
              <li>Creación por un `Administrador` desde el panel de usuarios.</li>
            </ul>
            <h4>Asignación / flujo</h4>
            <p>Cuando un usuario crea un ticket, el ticket:</p>
            <ol>
              <li>Se registra en estado <em>nuevo</em> o <em>abierto</em>.</li>
              <li>Puede ser encolado automáticamente según categoría/servicio.</li>
              <li>Queda <strong>sin asignar</strong> hasta que un agente lo reclame o un administrador lo asigne.</li>
            </ol>
            <h4>Permisos</h4>
            <ul>
              <li>Ver/editar solo sus propios tickets.</li>
              <li>No puede reasignar ni cambiar roles.</li>
            </ul>
            <h4>Endpoints (ejemplos)</h4>
            <pre><code>POST /api/users         # registrar
POST /api/tickets       # crear ticket (user_id)
GET  /api/tickets?user=1  # listar tickets de usuario
POST /api/tickets/{id}/comments  # añadir comentario
</code></pre>
            <h4>Esquema mínimo (ejemplos)</h4>
            <pre><code class="sql">CREATE TABLE users (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(100), email VARCHAR(150) UNIQUE, password VARCHAR(255), role VARCHAR(20), created_at DATETIME);
CREATE TABLE tickets (id INT AUTO_INCREMENT PRIMARY KEY, user_id INT, title VARCHAR(200), description TEXT, status VARCHAR(30), priority VARCHAR(20), assigned_to INT NULL, created_at DATETIME);
</code></pre>
          </article>

          <article class="module module-with-image">
            <div class="module-header">
              <div>
                <h3>Módulo: Agente</h3>
                <p><strong>Propósito:</strong> Personal de soporte que gestiona y resuelve tickets.</p>
              </div>
              <img src="assets/Agentes.png" alt="Módulo Agentes" class="module-image" />
            </div>
            <h4>Funciones principales</h4>
            <ul>
              <li>Ver lista de tickets asignados y pendientes (cola).</li>
              <li>Reclamar (claim) tickets sin asignar.</li>
              <li>Responder al usuario, agregar notas internas y cambiar estado.</li>
              <li>Reasignar tickets a otros agentes o escalar a administrador.</li>
              <li>Marcar prioridades y adjuntar evidencias.</li>
            </ul>
            <h4>Cómo se crea</h4>
            <p>Un `Agente` normalmente es creado por un `Administrador` o provisionado mediante sincronización con un directorio corporativo.</p>
            <h4>Asignación / flujo</h4>
            <ol>
              <li>El administrador puede asignar tickets directamente a un agente.</li>
              <li>Los agentes pueden ver una cola de tickets no asignados y reclamar los que atienden.</li>
              <li>Al reclamar, el campo <code>assigned_to</code> se actualiza con el id del agente.</li>
            </ol>
            <h4>Permisos</h4>
            <ul>
              <li>Ver tickets asignados y tickets públicos de la cola.</li>
              <li>Modificar estado, agregar comentarios, reasignar.</li>
              <li>Acceso limitado a paneles administrativos (según rol).</li>
            </ul>
            <h4>Endpoints (ejemplos)</h4>
            <pre><code>GET  /api/tickets?assigned_to={agent_id}
POST /api/tickets/{id}/claim    # reclamar ticket
POST /api/tickets/{id}/reply    # respuesta / nota pública
POST /api/tickets/{id}/internal # nota interna
POST /api/tickets/{id}/assign   # reasignar (admin/agent con permiso)
</code></pre>
          </article>

          <article class="module module-with-image">
            <div class="module-header">
              <div>
                <h3>Módulo: Administrador</h3>
                <p><strong>Propósito:</strong> Gestión completa del sistema: usuarios, agentes, configuraciones, reportes y asignaciones.</p>
              </div>
              <img src="assets/Administrador.png" alt="Módulo Administrador" class="module-image" />
            </div>
            <h4>Funciones principales</h4>
            <ul>
              <li>Crear/editar/eliminar usuarios y agentes.</li>
              <li>Asignar tickets a agentes o equipos.</li>
              <li>Gestionar categorías, prioridades y SLA.</li>
              <li>Ver reportes, métricas y exportar datos.</li>
              <li>Configurar integraciones (correo, webhooks, APIs).</li>
            </ul>
            <h4>Cómo se crea</h4>
            <p>El primer `Administrador` suele crearse durante la instalación o mediante una seed; posteriores administradores pueden ser añadidos por usuarios con privilegios.</p>
            <h4>Asignación / flujo</h4>
            <p>Los administradores pueden asignar tickets manualmente o configurar reglas automáticas (por categoría, prioridad, horario).</p>
            <h4>Permisos</h4>
            <ul>
              <li>Acceso completo a todos los datos y configuraciones.</li>
              <li>Puede delegar permisos mediante roles y grupos.</li>
            </ul>
            <h4>Endpoints (ejemplos)</h4>
            <pre><code>GET  /api/admin/users
POST /api/admin/users      # crear usuario/agent
PUT  /api/admin/users/{id} # actualizar
POST /api/admin/tickets/{id}/assign # asignar a agente
</code></pre>
            <h4>Tablas y migraciones recomendadas</h4>
            <pre><code class="sql">CREATE TABLE roles (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(50));
CREATE TABLE user_roles (user_id INT, role_id INT);
-- permisos más finos pueden almacenarse en una tabla permissions
</code></pre>
          </article>

          <h4>Matriz de permisos (resumen)</h4>
          <table>
            <thead><tr><th>Acción</th><th>Usuario</th><th>Agente</th><th>Administrador</th></tr></thead>
            <tbody>
              <tr><td>Crear ticket</td><td>Sí</td><td>Sí</td><td>Sí</td></tr>
              <tr><td>Ver tickets (todos)</td><td>No</td><td>Solo asignados/cola</td><td>Sí</td></tr>
              <tr><td>Asignar ticket</td><td>No</td><td>Sí (según permiso)</td><td>Sí</td></tr>
              <tr><td>Gestionar usuarios</td><td>No</td><td>No</td><td>Sí</td></tr>
            </tbody>
          </table>

          <p>Adapta los endpoints y permisos a tu implementación concreta. Puedo generar migraciones SQL completas y ejemplos de requests/responses si quieres.</p>
        </section>

        <section id="autenticacion" class="panel with-image">
          <div class="panel-header">
            <div class="panel-content">
              <h2>Autenticación / Login</h2>
              <p>Proceso para que usuarios y agentes accedan al sistema con sus credenciales.</p>
            </div>
            <img src="assets/Login.png" alt="Pantalla Login" class="side-image" />
          </div>
          <h4>Flujo de Login</h4>
          <ol>
            <li>Usuario ingresa <code>email</code> y <code>contraseña</code> en la pantalla de login.</li>
            <li>El sistema verifica las credenciales contra la tabla <code>users</code>.</li>
            <li>Si es válido, se genera un token de sesión (JWT o sesión PHP).</li>
            <li>Se redirige hacia el panel según el rol: usuario → <code>/dashboard</code>, agente → <code>/agent/tickets</code>, admin → <code>/admin</code>.</li>
          </ol>
          <h4>Vista/Pantalla de Login</h4>
          <ul>
            <li>Formulario con campos: email, contraseña.</li>
            <li>Botón "Iniciar sesión".</li>
            <li>Enlace "Olvidé mi contraseña" → va a <code>#recuperar-pwd</code>.</li>
            <li>Enlace "Crear cuenta" → va a <code>#registro</code>.</li>
          </ul>
          <h4>Endpoint</h4>
          <pre><code>POST /api/auth/login
Content-Type: application/json

{
  "email": "usuario@example.com",
  "password": "contraseña123"
}

Response (200 OK):
{
  "success": true,
  "user": {
    "id": 1,
    "name": "Juan Pérez",
    "email": "usuario@example.com",
    "role": "user"
  },
  "token": "eyJ0eXAiOiJKV1QiLCJhbGc..."
}
</code></pre>
          <h4>Validaciones</h4>
          <ul>
            <li>Email vacío o formato inválido → error 400.</li>
            <li>Contraseña incorrecta → error 401.</li>
            <li>Usuario no existe → error 404 (o 401 por seguridad).</li>
            <li>Usuario desactivado → error 403.</li>
          </ul>
        </section>

        <section id="registro" class="panel">
          <h2>Registro / Sign Up</h2>
          <p>Permite que nuevos usuarios se registren en el sistema (si está habilitado públicamente).</p>
          <h4>Flujo de Registro</h4>
          <ol>
            <li>Usuario hace clic en "Crear cuenta" desde la pantalla de login.</li>
            <li>Completa formulario: nombre, email, contraseña, confirmación contraseña.</li>
            <li>Opcionalmente, puede ingresar empresa/departamento (según la configuración).</li>
            <li>Se envía un email de confirmación con un enlace de verificación.</li>
            <li>Usuario confirma email y accede al sistema (con rol <code>user</code> por defecto).</li>
          </ol>
          <h4>Vista/Pantalla de Registro</h4>
          <ul>
            <li>Campos: nombre, email, contraseña, confirmar contraseña.</li>
            <li>Checkbox: aceptar términos y condiciones.</li>
            <li>Botón "Registrarse".</li>
            <li>Enlace "Ya tengo cuenta" → vuelve a login.</li>
          </ul>
          <h4>Endpoint</h4>
          <pre><code>POST /api/auth/register
Content-Type: application/json

{
  "name": "Juan Pérez",
  "email": "usuario@example.com",
  "password": "contraseña123",
  "password_confirm": "contraseña123"
}

Response (201 Created):
{
  "success": true,
  "message": "Usuario registrado. Por favor confirma tu email.",
  "user_id": 2
}
</code></pre>
          <h4>Validaciones</h4>
          <ul>
            <li>Email ya existe → error 409 (conflict).</li>
            <li>Contraseña débil (&lt;8 caracteres, sin números) → error 400.</li>
            <li>Contraseñas no coinciden → error 400.</li>
          </ul>
        </section>

        <section id="panel-usuario" class="panel">
          <h2>Panel de Usuario</h2>
          <p>Interfaz principal para usuarios después de iniciar sesión. Accesible en <code>/dashboard</code> o <code>/user/home</code>.</p>
          <h4>Componentes / Vistas</h4>
          <ul>
            <li><strong>Resumen (Overview):</strong> contador de tickets abiertos, en progreso, cerrados; próximas vencidas.</li>
            <li><strong>Lista de mis tickets:</strong> tabla con columnas: ID, Título, Estado, Prioridad, Fecha, Última actualización.</li>
            <li><strong>Filtros:</strong> por estado (abierto, en progreso, cerrado), prioridad, fecha.</li>
            <li><strong>Botón "Crear ticket":</strong> abre formulario para crear un nuevo ticket.</li>
            <li><strong>Perfil / Configuración:</strong> editar nombre, email, cambiar contraseña, preferencias.</li>
          </ul>
          <div class="gallery-grid">
            <figure class="gallery-item">
              <img src="assets/User.png" alt="Vista Panel Usuario" />
              <figcaption>Panel de usuario</figcaption>
            </figure>
            <figure class="gallery-item">
              <img src="assets/Ticket_list.png" alt="Lista de Tickets" />
              <figcaption>Listado y filtros de tickets</figcaption>
            </figure>
          </div>
        </section>

        <section id="panel-clientes" class="panel">
          <h2>Panel de Clientes</h2>
          <p>Experiencia del cliente: creación de tickets, seguimiento, interacción y cierre. Este panel prioriza claridad del estado y comunicación con el agente.</p>
          <p class="muted">Capturas: <code>assets/Perfil-empresa.png</code>, <code>assets/Ticket_detail.png</code>.</p>
          <ul class="steps">
            <li><div><strong>Crear ticket</strong><div class="muted">Define título, descripción, categoría y prioridad; adjunta evidencia si aplica.</div></div></li>
            <li><div><strong>Dar seguimiento</strong><div class="muted">Consulta el detalle, historial de cambios y respuestas del agente.</div></div></li>
            <li><div><strong>Confirmar cierre</strong><div class="muted">Valida la solución y cierra el ticket (o responde si aún requiere ajustes).</div></div></li>
          </ul>
          <div class="gallery-grid">
            <figure class="gallery-item">
              <img src="assets/Perfil-empresa.png" alt="Perfil / Empresa" />
              <figcaption>Perfil y datos de empresa del cliente</figcaption>
            </figure>
            <figure class="gallery-item">
              <img src="assets/Ticket_detail.png" alt="Detalle del ticket" />
              <figcaption>Detalle del ticket: estado, conversación y evidencias</figcaption>
            </figure>
          </div>
        </section>

        <section id="panel-agentes" class="panel">
          <h2>Panel de Agentes</h2>
          <p>Operación del equipo de soporte: cola, asignación, tiempos, respuestas, notas internas y evidencias.</p>
          <p class="muted">Captura: <code>assets/Agentes.png</code>.</p>
          <div class="two-col">
            <div class="callout">
              <h4>Buenas prácticas</h4>
              <p>Registrar cada paso relevante en comentarios y usar notas internas para coordinación sin exponer información al cliente.</p>
            </div>
            <div class="callout">
              <h4>Control de estado</h4>
              <p>Usar “En espera” cuando falta información y “Resuelto” cuando la solución fue entregada.</p>
            </div>
          </div>
          <figure>
            <img src="assets/Agentes.png" alt="Panel de Agentes" class="side-image" />
            <figcaption>Vista general del panel de agentes</figcaption>
          </figure>
        </section>

        <section id="panel-admin" class="panel">
          <h2>Panel de Administración</h2>
          <p>Configuración del sistema, usuarios, permisos, reglas de asignación y supervisión general.</p>
          <p class="muted">Capturas: <code>assets/Administrador.png</code>, <code>assets/Orgs.png</code>.</p>
          <div class="cards">
            <div class="card"><h4>Usuarios y roles</h4><p>Altas/bajas/cambios, restablecimiento de acceso, asignación de permisos.</p></div>
            <div class="card"><h4>Catálogos</h4><p>Categorías, prioridades, estados, reglas internas y parámetros de operación.</p></div>
            <div class="card"><h4>Organizaciones</h4><p>Gestión de empresas, relación con usuarios y control administrativo.</p></div>
          </div>
          <div class="gallery-grid">
            <figure class="gallery-item">
              <img src="assets/Administrador.png" alt="Panel Administrador" />
              <figcaption>Panel de administración</figcaption>
            </figure>
            <figure class="gallery-item">
              <img src="assets/Orgs.png" alt="Organizaciones" />
              <figcaption>Gestión de organizaciones / empresas</figcaption>
            </figure>
          </div>
        </section>

        <section id="recuperar-pwd" class="panel">
          <h2>Recuperar Contraseña</h2>
          <p>Flujo para que usuarios que olvidaron su contraseña la restablezcan.</p>
          <h4>Flujo paso a paso</h4>
          <ol>
            <li><strong>Paso 1 (Solicitud):</strong> Usuario ingresa email en la página "Olvidé mi contraseña".</li>
            <li><strong>Paso 2 (Email):</strong> Se envía email con enlace temporal que incluye token válido por 24h (ej: <code>/reset-password?token=abc123xyz</code>).</li>
            <li><strong>Paso 3 (Entrada):</strong> Usuario hace clic en el enlace, accede a página con campos: nueva contraseña, confirmar contraseña.</li>
            <li><strong>Paso 4 (Confirmación):</strong> Se valida el token y se actualiza la contraseña. Mensaje de éxito y redirección a login.</li>
          </ol>
        </section>

        <section id="tareas-operativas" class="panel">
          <h2>Tareas operativas (día a día)</h2>
          <p>Checklist de tareas típicas para mantener el flujo saludable y evitar tickets estancados.</p>
          <p class="muted">Captura: <code>assets/tareas.png</code>.</p>
          <ol class="steps">
            <li><div><strong>Revisar cola sin asignar</strong><div class="muted">Asignar por prioridad/categoría y evitar duplicados.</div></div></li>
            <li><div><strong>Atender tickets críticos</strong><div class="muted">Priorizar SLA y registrar evidencia.</div></div></li>
            <li><div><strong>Controlar tickets en espera</strong><div class="muted">Solicitar información faltante y definir política de cierre.</div></div></li>
            <li><div><strong>Cerrar y documentar</strong><div class="muted">Dejar causa raíz y acciones preventivas.</div></div></li>
          </ol>
          <figure>
            <img src="assets/tareas.png" alt="Gestión de tareas" class="side-image" />
            <figcaption>Gestión de tareas: organización del trabajo interno y seguimiento</figcaption>
          </figure>
        </section>

        <section id="tareas-tickets" class="panel">
          <h2>Tareas / Crear y Gestionar Tickets</h2>
          <p>Cómo se crean tickets y cómo se gestionan durante su ciclo de vida.</p>
          <h4>Estados del Ticket</h4>
          <table>
            <thead><tr><th>Estado</th><th>Descripción</th><th>Recomendación</th></tr></thead>
            <tbody>
              <tr><td>Nuevo</td><td>Creado y pendiente de asignación.</td><td>Validar categoría y prioridad</td></tr>
              <tr><td>En progreso</td><td>En atención activa.</td><td>Responder con avances verificables</td></tr>
              <tr><td>En espera</td><td>Falta información o validación.</td><td>Registrar qué falta y fecha objetivo</td></tr>
              <tr><td>Resuelto</td><td>Solución entregada.</td><td>Solicitar confirmación del cliente</td></tr>
              <tr><td>Cerrado</td><td>Finalizado.</td><td>Dejar resumen final y evidencia</td></tr>
            </tbody>
          </table>
        </section>

        <section id="api" class="panel">
          <h2>API / Endpoints</h2>
          <p class="muted">Ejemplos compactos. Para capturas, usa <code>docs/assets/</code>.</p>

          <h3>Listado rápido</h3>
          <table>
            <thead><tr><th>Método</th><th>Ruta</th><th>Descripción</th></tr></thead>
            <tbody>
              <tr><td><span class="label method get">GET</span></td><td><code>/api/tickets</code></td><td>Listar tickets (con filtros).</td></tr>
              <tr><td><span class="label method post">POST</span></td><td><code>/api/tickets</code></td><td>Crear ticket.</td></tr>
              <tr><td><span class="label method get">GET</span></td><td><code>/api/tickets/{id}</code></td><td>Detalle de ticket.</td></tr>
            </tbody>
          </table>

          <div class="tabs" data-tabs>
            <div class="tab-bar">
              <div class="example-meta">
                <span class="label method post">POST</span>
                <span class="label">/api/tickets</span>
              </div>
              <div class="tab-buttons" role="tablist" aria-label="Ejemplo de API">
                <button class="tab-btn" type="button" role="tab" aria-selected="true" data-tab="req">Request</button>
                <button class="tab-btn" type="button" role="tab" aria-selected="false" data-tab="resp200">Response 200</button>
                <button class="tab-btn" type="button" role="tab" aria-selected="false" data-tab="resp404">Response 404</button>
              </div>
            </div>
            <div class="tab-panels">
              <div class="tab-panel active" role="tabpanel" data-panel="req">
                <pre><code class="http">POST /api/tickets
Content-Type: application/json
Accept: application/json

{
  "title": "No puedo iniciar sesión",
  "description": "El sistema indica credenciales inválidas aunque son correctas.",
  "priority": "high",
  "category": "soporte"
}
</code></pre>
              </div>
              <div class="tab-panel" role="tabpanel" data-panel="resp200">
                <pre><code class="json">{
  "success": true,
  "ticket": {
    "id": 42,
    "status": "new",
    "created_at": "2026-02-08T15:21:00-05:00"
  }
}
</code></pre>
              </div>
              <div class="tab-panel" role="tabpanel" data-panel="resp404">
                <pre><code class="json">{
  "success": false,
  "error": {
    "code": "CATEGORY_NOT_FOUND",
    "message": "La categoría enviada no existe."
  }
}
</code></pre>
              </div>
            </div>
          </div>
        </section>

        <section id="db" class="panel">
          <h2>Base de datos / Migraciones</h2>
          <p>Esquema resumido y diagrama:</p>
          <div class="db-figure">
            <img src="assets/db-schema.png" alt="Esquema BD" />
          </div>
          <pre><code class="sql">-- ejemplo mínimo
CREATE TABLE users (id INT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(100), email VARCHAR(150));
CREATE TABLE tickets (id INT PRIMARY KEY AUTO_INCREMENT, user_id INT, title VARCHAR(200), description TEXT, status VARCHAR(30), created_at DATETIME);
</code></pre>
        </section>

        <section id="capturas" class="panel">
          <h2>Capturas de pantalla</h2>
          <p>Coloca las imágenes en <code>docs/assets/</code>. Nombres recomendados:</p>
          <ul>
            <li><code>dashboard.png</code> — vista principal</li>
            <li><code>ticket-list.png</code> — lista de tickets</li>
            <li><code>ticket-detail.png</code> — detalle</li>
          </ul>
          <div class="gallery-grid">
            <figure class="gallery-item">
              <img src="assets/Ticket_list.png" alt="Lista tickets" />
              <figcaption>Listado de Tickets</figcaption>
            </figure>
            <figure class="gallery-item">
              <img src="assets/Ticket_detail.png" alt="Detalle ticket" />
              <figcaption>Detalle de Ticket</figcaption>
            </figure>
          </div>
        </section>

        <section id="contribuir" class="panel">
          <h2>Contribuir / Contacto</h2>
          <p>Pasos rápidos para contribuir al proyecto:</p>
          <ol>
            <li>Crear fork y branch.</li>
            <li>Agregar tests o evidencias visuales.</li>
            <li>Enviar Pull Request describiendo cambios.</li>
          </ol>
        </section>

        <footer class="page-footer">
          <small>Documentación generada — modifica los textos e imágenes según convenga.</small>
        </footer>
      </article>
    </main>
  </div>

  <script>
    const navLinks = Array.from(document.querySelectorAll('.nav a'));
    const tocLinks = Array.from(document.querySelectorAll('.toc a'));
    const allLinks = [...navLinks, ...tocLinks];

    function setActive(hash) {
      navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === hash));
    }

    // Smooth scroll + keep URL hash
    allLinks.forEach(a => {
      a.addEventListener('click', e => {
        const href = a.getAttribute('href');
        if (!href || !href.startsWith('#')) return;
        const target = document.querySelector(href);
        if (!target) return;

        e.preventDefault();
        history.pushState(null, '', href);
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        setActive(href);
      });
    });

    // Scroll-spy estable (basado en scroll)
    const targets = navLinks
      .map(a => a.getAttribute('href'))
      .filter(h => h && h.startsWith('#'))
      .map(h => ({ hash: h, el: document.querySelector(h) }))
      .filter(x => x.el);

    function pickInitial() {
      const hash = location.hash || '#intro';
      setActive(hash);
    }

    let ticking = false;
    function onScroll() {
      if (ticking) return;
      ticking = true;
      window.requestAnimationFrame(() => {
        ticking = false;
        const y = 120;
        let current = targets[0]?.hash || '#intro';
        for (const t of targets) {
          const top = t.el.getBoundingClientRect().top;
          if (top - y <= 0) current = t.hash;
          else break;
        }
        if (current && location.hash !== current) history.replaceState(null, '', current);
        setActive(current);
      });
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', onScroll);
    window.addEventListener('hashchange', () => {
      setActive(location.hash || '#intro');
    });
    pickInitial();
    onScroll();

    // Tabs
    document.querySelectorAll('[data-tabs]').forEach((tabs) => {
      const buttons = Array.from(tabs.querySelectorAll('.tab-btn'));
      const panels = Array.from(tabs.querySelectorAll('.tab-panel'));
      function activate(key) {
        buttons.forEach(b => b.setAttribute('aria-selected', b.dataset.tab === key ? 'true' : 'false'));
        panels.forEach(p => p.classList.toggle('active', p.dataset.panel === key));
      }
      buttons.forEach(b => b.addEventListener('click', () => activate(b.dataset.tab)));
      const initial = buttons.find(b => b.getAttribute('aria-selected') === 'true')?.dataset.tab || buttons[0]?.dataset.tab;
      if (initial) activate(initial);
    });

    function escapeHtml(s) {
      return s.replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
    }

    function highlightJson(text) {
      const safe = escapeHtml(text);
      return safe
        .replace(/([{}\[\],:])/g, '<span class="tok-punc">$1</span>')
        .replace(/\b(true|false)\b/g, '<span class="tok-bool">$1</span>')
        .replace(/\bnull\b/g, '<span class="tok-null">null</span>')
        .replace(/\b(-?\d+(?:\.\d+)?)\b/g, '<span class="tok-num">$1</span>')
        .replace(/"([^"\\]*(?:\\.[^"\\]*)*)"(?=\s*:)/g, '"<span class="tok-key">$1</span>"')
        .replace(/"([^"\\]*(?:\\.[^"\\]*)*)"/g, '"<span class="tok-str">$1</span>"');
    }

    function highlightHttp(text) {
      const lines = text.replace(/\r\n/g, '\n').split('\n');
      if (lines.length === 0) return escapeHtml(text);

      const first = lines[0];
      const m = first.match(/^(GET|POST|PUT|PATCH|DELETE)\s+([^\s]+)(.*)$/);
      let out = '';
      if (m) {
        out += `<span class="tok-method">${m[1]}</span> <span class="tok-path">${escapeHtml(m[2])}</span>${escapeHtml(m[3] || '')}`;
      } else {
        out += escapeHtml(first);
      }

      for (let i = 1; i < lines.length; i++) {
        const line = lines[i];
        if (line.trim() === '') {
          out += '\n';
          continue;
        }
        const hm = line.match(/^([A-Za-z\-]+):\s*(.*)$/);
        if (hm) {
          out += `\n<span class="tok-header">${escapeHtml(hm[1])}</span>: ${escapeHtml(hm[2])}`;
        } else {
          out += `\n${escapeHtml(line)}`;
        }
      }
      return out;
    }

    document.querySelectorAll('pre code.json').forEach(code => {
      code.innerHTML = highlightJson(code.textContent || '');
    });

    document.querySelectorAll('pre code.http').forEach(code => {
      code.innerHTML = highlightHttp(code.textContent || '');
    });
  </script>
</body>
</html>
